
# תוכנית: התראות לידים בטלגרם + שיפור UX

## סקירה

מימוש מערכת התראות שתשלח הודעה לטלגרם בכל פעם שמישהו משאיר פרטים במחשבון, בתוספת שיפור הניסוח בטפסים כדי לעודד לקוחות להשאיר פרטים.

---

## שלב 1: הגדרת סודות

שמירת שני הסודות בפרויקט:
- `TELEGRAM_BOT_TOKEN` 
- `TELEGRAM_CHAT_ID`

---

## שלב 2: יצירת Edge Function

**קובץ חדש:** `supabase/functions/notify-new-lead/index.ts`

פונקציה שמקבלת את פרטי הליד ושולחת הודעה מעוצבת לטלגרם:

```text
🔔 ליד חדש - ביתי!

👤 שם: ישראל ישראלי
📱 טלפון: 050-123-4567

📏 היקף: 200 מ'
🚪 שערים: 2
🐗 מזיקים: חזירים, דורבנים

💰 הערכת מחיר: ₪2,500 - ₪4,500

📞 להתקשר: tel:+972501234567
```

---

## שלב 3: עדכון המחשבונים

### HomePriceCalculator.tsx (ביתי)

**שינויי UX:**
- כותרת משנה: "השאירו פרטים ונחזור עם הצעה מותאמת"
- הוספת badge: "🔒 הפרטים שלך בטוחים"
- כפתור: "קבל הצעה ונחזור אליך"
- הודעת הצלחה: "קיבלנו! נציג יחזור אליך בהקדם"

**שינוי טכני:**
- קריאה ל-edge function אחרי שמירת הליד

### PriceEstimator.tsx (חקלאי)

אותם שינויים בדיוק למחשבון החקלאי.

---

## שלב 4: עדכון config.toml

הוספת הגדרה ל-edge function החדשה עם `verify_jwt = false`.

---

## סיכום קבצים

| פעולה | קובץ |
|-------|------|
| חדש | `supabase/functions/notify-new-lead/index.ts` |
| עדכון | `src/components/home/HomePriceCalculator.tsx` |
| עדכון | `src/components/PriceEstimator.tsx` |
| עדכון | `supabase/config.toml` |

---

## תוצאה צפויה

1. בכל פעם שלקוח משאיר פרטים - תקבל הודעה מיידית בטלגרם
2. הטפסים יראו יותר מזמינים ופחות "מפחידים"
3. הלקוח יבין שנחזור אליו, אבל עדיין יקבל הערכת מחיר מיידית
