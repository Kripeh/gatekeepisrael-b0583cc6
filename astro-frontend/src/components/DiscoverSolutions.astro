---
import {
  Battery,
  BookText,
  MapPin,
  Home,
  Tractor,
  DollarSign,
} from "lucide-react";

interface SolutionCard {
  icon: string;
  title: string;
  subtitle: string;
  links: Array<{ label: string; href: string }>;
  gradient: string;
  patternId: string;
}

const solutions: SolutionCard[] = [
  {
    icon: "dollar-sign",
    title: "××—×™×¨×™×",
    subtitle: "×©×§×™×¤×•×ª ××œ××”",
    gradient: "from-rose-500/10 to-red-500/10",
    patternId: "pricing",
    links: [
      { label: "××—×™×¨×•×Ÿ ××œ×", href: "/pricing" },
      { label: "××—×©×‘×•×Ÿ ×”×¦×¢×ª ××—×™×¨", href: "/#calculator" },
      { label: "×”×©×•×•××ª ROI", href: "/#roi" },
    ],
  },
  {
    icon: "tractor",
    title: "×œ×—×§×œ××™×",
    subtitle: "××™×’×•×Ÿ ××§×¦×•×¢×™ ×œ×©×˜×—×™×",
    gradient: "from-teal-500/10 to-green-500/10",
    patternId: "agriculture",
    links: [
      { label: "×”×ª×§× ×” ××§×¦×•×¢×™×ª", href: "/installation" },
      { label: "×’×“×¨ ×¡×•×œ××¨×™×ª ×œ×©×˜×—", href: "/blog/solar-fence" },
      { label: "××—×™×¨×•×Ÿ ×—×§×œ××™", href: "/pricing" },
    ],
  },
  {
    icon: "home",
    title: "×œ×‘×¢×œ×™ ×‘×ª×™×",
    subtitle: "×”×’× ×” ×¢×œ ×”×’×™× ×” ×•×”×—×¦×¨",
    gradient: "from-orange-500/10 to-amber-500/10",
    patternId: "residential",
    links: [
      { label: "×¤×ª×¨×•× ×•×ª ×œ×’×™× ×” ×•×œ×—×¦×¨", href: "/home-solutions" },
      { label: "×’×“×¨ ×¡×•×œ××¨×™×ª ×œ×‘×™×ª", href: "/blog/solar-fence" },
      { label: "××—×™×¨×•×Ÿ ×œ××’×•×¨×™×", href: "/pricing" },
    ],
  },
  {
    icon: "battery",
    title: "××•×¦×¨×™×",
    subtitle: "×¦×™×•×“ ××§×¦×•×¢×™ ×œ×’×™×“×•×¨",
    gradient: "from-green-500/10 to-emerald-500/10",
    patternId: "products",
    links: [
      { label: "××—×•×œ×œ×™ ××ª×— ×¡×•×œ××¨×™×™×", href: "/products/solar-energizers" },
      { label: "××‘×•×“×“×™× ×•×¨×›×™×‘×™ ×’×™×“×•×¨", href: "/products/insulators" },
      { label: "××›×©×•×¨ ××“×™×“×” ×•×‘×“×™×§×”", href: "/products/testing-equipment" },
    ],
  },
  {
    icon: "book-text",
    title: "××“×¨×™×›×™×",
    subtitle: "×œ××“ ×¢×œ ×’×“×¨×•×ª ×—×©××œ×™×•×ª",
    gradient: "from-blue-500/10 to-cyan-500/10",
    patternId: "guides",
    links: [
      { label: "×œ××” ×’×“×¨ ×—×©××œ×™×ª?", href: "/blog/why-electric-fence" },
      { label: "××“×¨×™×š ×—×–×™×¨×™ ×‘×¨", href: "/blog/boar-history-israel" },
      { label: "××¤×¨×˜ ×˜×›× ×•×œ×•×’×™", href: "/blog/electrical-fence-technology" },
      { label: "×›×œ ×”××××¨×™×", href: "/blog" },
    ],
  },
  {
    icon: "map-pin",
    title: "××–×•×¨×™ ×©×™×¨×•×ª",
    subtitle: "×”×ª×§× ×” ×‘×›×œ ×”××¨×¥",
    gradient: "from-purple-500/10 to-pink-500/10",
    patternId: "service-areas",
    links: [
      { label: "××¤×ª ×›×™×¡×•×™ ××¨×¦×™×ª", href: "/service-areas" },
      { label: "×—×™×¤×” ×•×”×§×¨×™×•×ª", href: "/regions/haifa" },
      { label: "×—×•×£ ×”×›×¨××œ", href: "/regions/carmel-coast" },
      { label: "×¢××§ ×”×™×¨×“×Ÿ", href: "/regions/jordan-valley" },
    ],
  },
];

// Icon mapping
const iconMap: Record<string, any> = {
  "battery": Battery,
  "book-text": BookText,
  "map-pin": MapPin,
  "home": Home,
  "tractor": Tractor,
  "dollar-sign": DollarSign,
};
---

<section id="discover" class="py-20 lg:py-28 bg-background">
  <div class="container mx-auto px-4">
    <!-- Header -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-2 bg-primary/15 border border-primary/30 text-primary px-5 py-2.5 rounded-full mb-4">
        <span class="font-bold text-sm">ğŸ¯ ×’×œ×” ××ª ×›×œ ×”×¤×ª×¨×•× ×•×ª</span>
      </div>
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-black text-foreground mb-4">
        ×”×¤×ª×¨×•×Ÿ ×”××•×©×œ×{" "}
        <span class="text-primary">×œ×›×œ ×¦×•×¨×š</span>
      </h2>
      <p class="text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto">
        ××•×¦×¨×™×, ×©×™×¨×•×ª×™×, ××“×¨×™×›×™× ×•××™×“×¢ - ×”×›×œ ×‘××§×•× ××—×“
      </p>
    </div>

    <!-- Solutions Grid -->
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
      {solutions.map((solution) => {
        const Icon = iconMap[solution.icon];
        return (
          <article
            class={`group relative bg-gradient-to-br ${solution.gradient} border border-border rounded-2xl p-8 hover:shadow-2xl hover:shadow-primary/10 hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden`}
            data-pattern={solution.patternId}
          >
            <!-- Icon -->
            <div class="w-16 h-16 rounded-2xl bg-primary/15 border-2 border-primary/30 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-primary/25 transition-all duration-300">
              <Icon className="w-8 h-8 text-primary" />
            </div>

            <!-- Title -->
            <h3 class="text-2xl font-bold text-foreground mb-2">
              {solution.title}
            </h3>
            <p class="text-muted-foreground text-sm mb-6">
              {solution.subtitle}
            </p>

            <!-- Links -->
            <div class="space-y-2">
              {solution.links.map((link) => (
                <a
                  href={link.href}
                  class="block text-sm font-medium text-foreground hover:text-primary transition-colors hover:translate-x-1 duration-200 rtl"
                >
                  â† {link.label}
                </a>
              ))}
            </div>

            <!-- Hover Glow Effect -->
            <div class="absolute inset-0 rounded-2xl bg-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
          </article>
        );
      })}
    </div>

    <!-- Bottom CTA -->
    <div class="text-center mt-12">
      <p class="text-muted-foreground">
        ×œ× ××¦××ª ××” ×©×—×™×¤×©×ª?{" "}
        <a href="/blog" class="text-primary font-semibold hover:underline">
          ×¢×‘×•×¨ ×œ×‘×œ×•×’
        </a>
        {" "}××•{" "}
        <a href="tel:+972508585310" class="text-primary font-semibold hover:underline">
          ×”×ª×§×©×¨ ××œ×™× ×•
        </a>
      </p>
    </div>
  </div>
</section>

<style>
  /* Subtle background patterns for solution cards */
  article[data-pattern]::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 0;
    opacity: 0.08;
    filter: grayscale(100%);
    pointer-events: none;
    border-radius: 1rem;
  }

  /* Pricing - Calculator grid pattern */
  article[data-pattern="pricing"]::before {
    background-image:
      repeating-linear-gradient(0deg, transparent, transparent 35px, currentColor 35px, currentColor 36px),
      repeating-linear-gradient(90deg, transparent, transparent 35px, currentColor 35px, currentColor 36px);
    opacity: 0.06;
  }

  /* Agriculture - Field rows pattern */
  article[data-pattern="agriculture"]::before {
    background-image:
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 60px,
        currentColor 60px,
        currentColor 62px
      );
    opacity: 0.07;
  }

  /* Residential - Home roof pattern */
  article[data-pattern="residential"]::before {
    background-image:
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 40px,
        currentColor 40px,
        currentColor 42px
      ),
      repeating-linear-gradient(
        -45deg,
        transparent,
        transparent 40px,
        currentColor 40px,
        currentColor 42px
      );
    opacity: 0.05;
  }

  /* Products - Circuit pattern */
  article[data-pattern="products"]::before {
    background-image:
      radial-gradient(circle at 25% 25%, currentColor 2px, transparent 2px),
      radial-gradient(circle at 75% 75%, currentColor 2px, transparent 2px);
    background-size: 50px 50px;
    opacity: 0.08;
  }

  /* Guides - Book pages pattern */
  article[data-pattern="guides"]::before {
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 25px,
        currentColor 25px,
        currentColor 26px
      );
    opacity: 0.06;
  }

  /* Service Areas - Map grid pattern */
  article[data-pattern="service-areas"]::before {
    background-image:
      repeating-linear-gradient(0deg, transparent, transparent 45px, currentColor 45px, currentColor 46px),
      repeating-linear-gradient(90deg, transparent, transparent 45px, currentColor 45px, currentColor 46px);
    opacity: 0.05;
  }

  /* Ensure content stays above pattern */
  article[data-pattern] > * {
    position: relative;
    z-index: 1;
  }
</style>
