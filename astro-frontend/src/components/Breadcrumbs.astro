---
interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface Props {
  items: BreadcrumbItem[];
  currentPath: string;
}

const { items, currentPath } = Astro.props;

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "דף הבית",
      "item": "https://gatekeepisrael.com/"
    },
    ...items.map((item, index) => ({
      "@type": "ListItem",
      "position": index + 2,
      "name": item.label,
      "item": item.href
        ? `https://gatekeepisrael.com${item.href}`
        : `https://gatekeepisrael.com${currentPath}`
    }))
  ]
};
---
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
<nav aria-label="Breadcrumb" class="py-4">
  <ol class="flex flex-wrap items-center gap-2 text-sm text-muted-foreground">
    <li>
      <a href="/" class="flex items-center gap-1 hover:text-primary transition-colors" aria-label="דף הבית">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        <span>דף הבית</span>
      </a>
    </li>
    {items.map((item) => (
      <li class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        {item.href ? (
          <a href={item.href} class="hover:text-primary transition-colors">{item.label}</a>
        ) : (
          <span class="text-foreground font-medium" aria-current="page">{item.label}</span>
        )}
      </li>
    ))}
  </ol>
</nav>
