---
import ServicePageLayout from '../layouts/ServicePageLayout.astro';
import HomePriceCalculatorIsland from '../components/react/HomePriceCalculatorIsland';
import homeData from '../../../public/api/pages/home-solutions.json';

const page = homeData;
const PHONE_LINK = 'tel:+972508585310';
const PHONE_DISPLAY = '050-858-5310';

const hero = (page.sections as any[]).find(s => s.type === 'hero');
const benefits = (page.sections as any[]).find(s => s.type === 'benefits');
const specs = (page.sections as any[]).find(s => s.type === 'specs');
const calculator = (page.sections as any[]).find(s => s.type === 'calculator');
const howItWorks = (page.sections as any[]).find(s => s.type === 'how-it-works');
const faq = (page.sections as any[]).find(s => s.type === 'faq');
---
<ServicePageLayout
  title={page.seo.title}
  description={page.seo.description}
  keywords={page.seo.keywords}
  canonical={page.seo.canonical}
  breadcrumbs={[{ label: "פתרונות לבית" }]}
  structuredData={page.structuredData}
>
  <!-- Hero -->
  <section class="py-12 md:py-20 bg-gradient-to-b from-primary/5 to-background">
    <div class="container">
      <div class="max-w-4xl mx-auto text-center">
        <div class="inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full mb-6">
          <span class="font-bold">{hero?.badge}</span>
        </div>
        <h1 class="text-3xl md:text-5xl font-black mb-6 text-balance">{page.h1}</h1>
        <p class="text-lg md:text-xl text-muted-foreground mb-4 text-pretty">
          {hero?.subtitle}
        </p>
        <p class="text-sm text-muted-foreground mb-8">{hero?.trustLine}</p>
        <a href={PHONE_LINK} class="btn-cta-glow inline-flex items-center gap-2 px-8 py-4 rounded-xl text-lg font-bold">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
          <span>התקשר לייעוץ - {PHONE_DISPLAY}</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Intro Content -->
  <section class="py-8 md:py-10">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <p class="text-muted-foreground leading-relaxed mb-4 text-pretty">
          חיות בר כמו חזירי בר, שפני סלע, דורבנים ושועלים הפכו לבעיה שכיחה גם בבתים פרטיים. נזקים לגינות – דשאים הרוסים, עצי פרי שנעקרו, אדניות שנחפרו – כל אלה קורים בלילה אחד כשחיות בר פושטות על החצר. גדר חשמלית ביתית היא הפתרון הבטוח והיעיל ביותר למניעת נזקים לגינות.
        </p>
        <p class="text-muted-foreground leading-relaxed text-pretty">
          הגדר הביתית שלנו מתוכננת במיוחד לסביבת מגורים – בטוחה לילדים ולחיות מחמד, דיסקרטית ומשתלבת בנוף הגינה, וקלה לתחזוקה. הצוות המקצועי שלנו מתקין את אותה טכנולוגיה מוכחת שמגנה על אלפי דונמים של שטחים חקלאיים מפני חיות בר בכל רחבי ישראל.
        </p>
      </div>
    </div>
  </section>

  <!-- Benefits -->
  {benefits && (
    <section class="py-12 md:py-16">
      <div class="container">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl md:text-3xl font-bold mb-4 text-center">{benefits.h2}</h2>
          <p class="text-center text-muted-foreground mb-8 text-pretty">{benefits.subtitle}</p>
          <div class="grid md:grid-cols-3 gap-6">
            {benefits.items?.map((item: any) => (
              <div class="card-forest rounded-2xl p-6 text-center hover:border-primary/50 transition-all duration-300">
                <h3 class="text-xl font-bold mb-3">{item.title}</h3>
                <p class="text-muted-foreground text-pretty">{item.description}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- Technical Specifications -->
  {specs && (
    <section class="py-12 md:py-16 bg-muted/30">
      <div class="container">
        <div class="max-w-5xl mx-auto">
          <div class="text-center mb-10">
            <div class="inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
              <span class="font-bold">תקן בינלאומי מאושר</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold mb-3">{specs.h2}</h2>
            <p class="text-muted-foreground text-pretty">{specs.subtitle}</p>
          </div>
          <div class="grid md:grid-cols-2 gap-8">
            {specs.groups?.map((group: any) => (
              <div class="bg-card border border-border rounded-2xl p-8 hover:border-primary/30 transition-all duration-300">
                <div class="flex items-center gap-3 mb-6">
                  {group.icon === 'home' && (
                    <div class="w-12 h-12 rounded-xl bg-primary/10 border border-primary/20 flex items-center justify-center">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    </div>
                  )}
                  {group.icon === 'tractor' && (
                    <div class="w-12 h-12 rounded-xl bg-primary/10 border border-primary/20 flex items-center justify-center">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg>
                    </div>
                  )}
                  <h3 class="text-xl font-bold text-foreground">{group.h3}</h3>
                </div>
                <ul class="space-y-3">
                  {group.items?.map((item: string) => (
                    <li class="flex items-start gap-2">
                      <span class="text-primary mt-0.5">•</span>
                      <span class="text-muted-foreground">{item}</span>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
          {specs.safetyNote && (
            <div class="mt-8 bg-primary/5 border-r-4 border-primary rounded-lg p-6">
              <div class="flex items-start gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary flex-shrink-0 mt-1"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
                <p class="text-foreground font-medium">{specs.safetyNote}</p>
              </div>
            </div>
          )}
        </div>
      </div>
    </section>
  )}

  <!-- Calculator (React Island placeholder) -->
  {calculator && (
    <section id="calculator" class="py-16 md:py-24 bg-background">
      <div class="container">
        <div class="max-w-2xl mx-auto">
          <div class="text-center mb-10">
            <div class="inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
              <span class="font-bold">מחשבון מחיר ביתי</span>
            </div>
            <h2 class="text-3xl md:text-4xl font-black text-foreground mb-3 text-balance">
              {calculator.h2}
            </h2>
            <p class="text-muted-foreground text-pretty">{calculator.subtitle}</p>
          </div>
          <!-- React Island: HomePriceCalculator -->
          <HomePriceCalculatorIsland client:visible />
        </div>
      </div>
    </section>
  )}

  <!-- How It Works -->
  {howItWorks && (
    <section class="py-12 md:py-16 bg-muted/30">
      <div class="container">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl md:text-3xl font-bold mb-4 text-center">{howItWorks.h2}</h2>
          <p class="text-center text-muted-foreground mb-8">{howItWorks.subtitle}</p>
          <div class="space-y-6">
            {howItWorks.steps?.map((step: any, i: number) => (
              <div class="flex gap-4 bg-card p-6 rounded-2xl border border-border">
                <div class="flex-shrink-0 w-12 h-12 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold text-xl">
                  {i + 1}
                </div>
                <div class="flex-1">
                  <h3 class="text-lg font-bold mb-2">{step.title}</h3>
                  <p class="text-muted-foreground text-pretty">{step.description}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- FAQ -->
  {faq && (
    <section class="py-12 md:py-16">
      <div class="container">
        <div class="max-w-3xl mx-auto">
          <h2 class="text-2xl md:text-3xl font-bold mb-4 text-center">{faq.h2}</h2>
          <p class="text-center text-muted-foreground mb-8">{faq.subtitle}</p>
          <div class="space-y-4">
            {faq.items?.map((item: any) => (
              <details class="card-forest rounded-xl px-6 group">
                <summary class="text-right text-lg font-bold cursor-pointer list-none flex items-center justify-between text-foreground hover:text-primary py-6">
                  <span class="text-balance">{item.question}</span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-open:rotate-180 flex-shrink-0 mr-2"><path d="m6 9 6 6 6-6"/></svg>
                </summary>
                <p class="text-muted-foreground leading-relaxed pb-6 text-pretty">{item.answer}</p>
              </details>
            ))}
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- CTA -->
  <section class="py-16 md:py-20 bg-primary text-primary-foreground">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-2xl md:text-4xl font-black mb-6">מוכנים להגן על הגינה?</h2>
        <p class="text-lg opacity-90 mb-8">התקשרו עכשיו לייעוץ חינם ולהצעת מחיר מותאמת</p>
        <a href={PHONE_LINK} class="inline-flex items-center gap-2 bg-white text-primary px-8 py-4 rounded-xl text-lg font-bold hover:bg-white/90 transition-colors">
          <span>התקשר - {PHONE_DISPLAY}</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Contextual Content -->
  <section class="py-12 md:py-16">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center">מידע נוסף שיעזור לכם להחליט</h2>
        <p class="text-muted-foreground leading-relaxed mb-4 text-pretty">
          הגדר הביתית שלנו מבוססת על אותה טכנולוגיה מוכחת שמגנה על שטחים חקלאיים בכל הארץ. למדו <a href="/why-electric-fence" class="text-primary font-semibold hover:underline">למה גדר חשמלית היא הפתרון היעיל ביותר</a> ואיך היא עובדת.
        </p>
        <p class="text-muted-foreground leading-relaxed mb-4 text-pretty">
          רוצים לדעת <a href="/pricing" class="text-primary font-semibold hover:underline">כמה עולה גדר חשמלית</a>? ראו את המחירון המפורט שלנו. עבור חצרות גדולות ללא חיבור חשמל, שקלו <a href="/solar-fence" class="text-primary font-semibold hover:underline">גדר סולארית אוטונומית</a>.
        </p>
        <p class="text-muted-foreground leading-relaxed text-pretty">
          הכירו את <a href="/installation" class="text-primary font-semibold hover:underline">תהליך ההתקנה</a> המקצועי שלנו – מסקר שטח ועד חיבור וניסוי. קראו גם את <a href="/blog/boar-history-israel" class="text-primary font-semibold hover:underline">המדריך על חזירי בר בישראל</a> כדי להבין את גודל הבעיה ואיך לפתור אותה.
        </p>
      </div>
    </div>
  </section>

  <!-- Internal Links -->
  <nav aria-label="דפים קשורים" class="py-12">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-lg font-bold mb-4">עמודים קשורים:</h2>
        <div class="flex flex-wrap gap-4">
          {page.internalLinks.map((link: any) => (
            <a href={link.href} class="text-primary hover:underline">{link.label}</a>
          ))}
        </div>
      </div>
    </div>
  </nav>
</ServicePageLayout>